{
  "openapi": "3.0.1",
  "info": {
    "title": "Parque Temático Virtual API",
    "description": "API para gestionar todas las operaciones del parque temático.",
    "version": "v1"
  },
  "paths": {
    "/attractions": {
      "get": {
        "tags": [
          "Attraction"
        ],
        "summary": "Obtiene una lista de todas las atracciones.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve la lista de todas atracciones.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AttractionResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AttractionResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/AttractionResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "post": {
        "tags": [
          "Attraction"
        ],
        "summary": "Crea una nueva atracción.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "Datos de la nueva atracción.\r\nEl tipo de attraccion debe ser uno de:\r\n['Rollercoaster', 'Simulator', 'Show', 'InteractiveZone'].",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAttractionRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAttractionRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateAttractionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          },
          "201": {
            "description": "Atracción creada exitosamente."
          },
          "400": {
            "description": "Si los datos proporcionados son inválidos."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/attractions/{id}": {
      "get": {
        "tags": [
          "Attraction"
        ],
        "summary": "Obtiene una atracción específica por su ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Created",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "200": {
            "description": "Devuelve la atracción encontrada."
          },
          "404": {
            "description": "Si la atracción no existe."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "Attraction"
        ],
        "summary": "Elimina una atracción por su ID.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción a eliminar.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          },
          "204": {
            "description": "Atracción eliminada exitosamente."
          },
          "404": {
            "description": "Si la atracción no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "put": {
        "tags": [
          "Attraction"
        ],
        "summary": "Modifica una atracción existente.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción a modificar.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "Los nuevos datos para la atracción.\r\nEl tipo de attraccion debe ser uno de:\r\n['Rollercoaster', 'Simulator', 'Show', 'InteractiveZone'].",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ModifyAttractionParamsRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ModifyAttractionParamsRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ModifyAttractionParamsRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Devuelve la atracción actualizada.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          },
          "404": {
            "description": "Si la atracción no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/attractions/{id}/incidents": {
      "put": {
        "tags": [
          "Attraction"
        ],
        "summary": "Agrega un incidente a una atraccion.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>OPERATOR</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción destino.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "El incidente a agregar.",
          "content": {
            "application/json": {
              "schema": {
                "type": "string"
              }
            },
            "text/json": {
              "schema": {
                "type": "string"
              }
            },
            "application/*+json": {
              "schema": {
                "type": "string"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Incidente agregado existosamente."
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          },
          "404": {
            "description": "Si la atracción no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "Attraction"
        ],
        "summary": "Elimina un incidente de la atraccion.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>OPERATOR</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atraccion destino.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "incident",
            "in": "query",
            "description": "El incidente a eliminar.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "204": {
            "description": "Incidente eliminado exitosamente."
          },
          "404": {
            "description": "Si la atracción no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/attractions/{id}/preventinve-maintenances": {
      "post": {
        "tags": [
          "Attraction"
        ],
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePreventiveMaintenanceRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePreventiveMaintenanceRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePreventiveMaintenanceRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "No autorizado - Token faltante o inválido"
          },
          "403": {
            "description": "Prohibido - Permisos insuficientes"
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/attractions/{id}/visitors": {
      "get": {
        "tags": [
          "AttractionControl"
        ],
        "summary": "Obtiene una lista de los IDs de los visitantes actualmente dentro de una atracción.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>OPERATOR</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve la lista de todos los visitantes.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/IdResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/IdResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/IdResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Operador."
          },
          "404": {
            "description": "Si no se encuentra un atraccion con ese ID."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "post": {
        "tags": [
          "AttractionControl"
        ],
        "summary": "Registra la entrada de un visitante a una atracción.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>OPERATOR</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "byTicket",
            "in": "query",
            "description": "Booleano que permite elegir entre entrar usando el qr del ticket (true) o usando el id del usuario (false).",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "El QR (GUID) del ticket o el ID (GUID) del visitante a entrar.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IdRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/IdRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/IdRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Entrada registrada exitosamente."
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Operador."
          },
          "400": {
            "description": "Si el visitante no cumple los requisitos (ej. edad)."
          },
          "404": {
            "description": "Si la atracción, el ticket o el visitante no existen."
          },
          "409": {
            "description": "Si la atraccion tiene incidentes o esta llena."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "AttractionControl"
        ],
        "summary": "Registra la salida de un visitante de una atracción con su id.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>OPERATOR</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "visitorNfc",
            "in": "query",
            "description": "El NFC (GUID) del visitante.",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Salida registrada exitosamente."
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Operador."
          },
          "404": {
            "description": "Si no se encuentra un atraccion con ese ID."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/attractions/{id}/reports": {
      "get": {
        "tags": [
          "AttractionControl"
        ],
        "summary": "Genera un reporte del número de usos de la atracción entre dos fechas.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la atracción.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "From",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "To",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/NumberUsesResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/NumberUsesResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/NumberUsesResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "404": {
            "description": "Si no se encuentra un atraccion con ese ID."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/auth/login": {
      "post": {
        "tags": [
          "Authorization"
        ],
        "summary": "Autentica a un usuario y devuelve un JWT.",
        "requestBody": {
          "description": "Credenciales del usuario (email y contraseña).",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Devuelve el token JWT.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "400": {
            "description": "Si el formato es inválido."
          },
          "403": {
            "description": "Si las credenciales son incorrectas."
          }
        }
      }
    },
    "/records": {
      "get": {
        "tags": [
          "PointRecord"
        ],
        "summary": "Obtiene el historial de puntos de un usuario específico.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>VISITOR</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve la lista de registros de puntos.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PointRecordResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PointRecordResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PointRecordResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Visitante.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/ProblemDetails"
                }
              }
            }
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/ranking/strategies": {
      "get": {
        "tags": [
          "Ranking"
        ],
        "summary": "Obtiene las estrategias de puntuación disponibles o solo la que está activa.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "active",
            "in": "query",
            "description": "Si es 'true', devuelve solo la estrategia activa. De lo contrario, devuelve todas.",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve la(s) estrategia(s) solicitada(s).",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetStrategyResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetStrategyResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetStrategyResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/ranking": {
      "post": {
        "tags": [
          "Ranking"
        ],
        "summary": "Establece la estrategia de puntuación activa para el parque.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "El tipo de estrategia a activar.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetActiveStrategyRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/SetActiveStrategyRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/SetActiveStrategyRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "La estrategia se estableció correctamente.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/GetStrategyResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetStrategyResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetStrategyResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "400": {
            "description": "Si el tipo de estrategia es inválido."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "get": {
        "tags": [
          "Ranking"
        ],
        "summary": "Obtiene la tabla de clasificación diaria de los visitantes con más puntos.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve el ranking diario.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserRankingResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserRankingResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/UserRankingResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/rewards/{id}": {
      "get": {
        "tags": [
          "Reward"
        ],
        "summary": "Obtiene una recompensa específica por su ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) de la recompensa.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve la recompensa encontrada.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/GetRewardResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetRewardResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetRewardResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "404": {
            "description": "Si la recompensa no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/rewards": {
      "get": {
        "tags": [
          "Reward"
        ],
        "summary": "Obtiene las recompensas del sistema.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve todas las recompensas del sistema.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetRewardResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetRewardResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetRewardResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "post": {
        "tags": [
          "Reward"
        ],
        "summary": "Agrega una nueva recompensa al sistema.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "Datos de la nueva recompensa a agregar.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRewardRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRewardRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateRewardRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario visitante creado exitosamente.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Operador."
          },
          "400": {
            "description": "Si los datos son inválidos."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/rewards/{rewardId}": {
      "post": {
        "tags": [
          "Reward"
        ],
        "summary": "Canjea (compra) una recompensa usando los puntos del visitante.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>VISITOR</span>",
        "parameters": [
          {
            "name": "rewardId",
            "in": "path",
            "description": "El ID (GUID) de la recompensa a canjear.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Canje realizado exitosamente."
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Visitante."
          },
          "400": {
            "description": "Si la recompensa no está disponible, el visitante no tiene puntos suficientes, o el ID del usuario no se encuentra."
          },
          "404": {
            "description": "Si la recompensa no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/specialevents/{id}": {
      "get": {
        "tags": [
          "SpecialEvent"
        ],
        "summary": "Obtiene un evento especial específico por su ID.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) del evento.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve el evento encontrado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/GetEventResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetEventResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetEventResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "404": {
            "description": "Si el evento no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "SpecialEvent"
        ],
        "summary": "Elimina un evento especial por su ID.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) del evento a eliminar.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "204": {
            "description": "Evento eliminado exitosamente."
          },
          "404": {
            "description": "Si el evento no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/specialevents": {
      "get": {
        "tags": [
          "SpecialEvent"
        ],
        "summary": "Obtiene una lista de todos los eventos especiales.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve la lista de eventos.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetEventResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetEventResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetEventResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "post": {
        "tags": [
          "SpecialEvent"
        ],
        "summary": "Crea un nuevo evento especial.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "Datos para el nuevo evento.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSpecialEventRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSpecialEventRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateSpecialEventRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Evento creado exitosamente.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "400": {
            "description": "Si los datos proporcionados son inválidos."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/specialevents/{id}/attractions": {
      "post": {
        "tags": [
          "SpecialEvent"
        ],
        "summary": "Asigna una atracción a un evento especial.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) del evento.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "El ID (GUID) de la atracción a añadir.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IdRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/IdRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/IdRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Atracción añadida al evento correctamente."
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "404": {
            "description": "Si el evento o la atracción no existen."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "delete": {
        "tags": [
          "SpecialEvent"
        ],
        "summary": "Quita una atracción de un evento especial.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) del evento.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Id",
            "in": "query",
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Atracción quitada del evento correctamente."
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "404": {
            "description": "Si el evento o la atracción no existen."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "get": {
        "tags": [
          "SpecialEvent"
        ],
        "summary": "Obtiene la lista de atracciones asociadas a un evento especial.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) del evento.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve las atracciones del evento.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionListResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionListResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/AttractionListResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Admin."
          },
          "404": {
            "description": "Si el evento no existe."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/time": {
      "get": {
        "tags": [
          "SystemTime"
        ],
        "summary": "Obtiene la fecha y hora actual configurada en el sistema.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/GetTimeResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTimeResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTimeResponse"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "SystemTime"
        ],
        "summary": "Establece una nueva fecha y hora para el sistema.",
        "requestBody": {
          "description": "La nueva fecha y hora en formato \"YYYY-MM-DDTHH:MM\".",
          "content": {
            "application/json": {
              "schema": {
                "type": "string"
              }
            },
            "text/json": {
              "schema": {
                "type": "string"
              }
            },
            "application/*+json": {
              "schema": {
                "type": "string"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "La hora del sistema fue actualizada correctamente.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/SetTimeResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SetTimeResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/SetTimeResponse"
                }
              }
            }
          },
          "400": {
            "description": "Si el formato de la fecha es inválido."
          }
        }
      }
    },
    "/tickets": {
      "post": {
        "tags": [
          "Ticket"
        ],
        "summary": "Permite a un visitante comprar un ticket para una fecha o evento especial.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>VISITOR</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "Datos de la compra del ticket, incluyendo ID de usuario y fecha.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BuyTicketRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/BuyTicketRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/BuyTicketRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Ticket comprado y creado exitosamente.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Visitante."
          },
          "400": {
            "description": "Si los datos son inválidos o no se puede comprar el ticket (ej. evento lleno)."
          },
          "404": {
            "description": "Si la atracción o el evento no existen."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "get": {
        "tags": [
          "Ticket"
        ],
        "summary": "Obtiene los tickets del usuario autenticado.",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>VISITOR</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve los tickets del usuario.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Prohibido - Permisos insuficientes"
          },
          "404": {
            "description": "Si no se encuentra un usuario con el ID del autenticado."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/users/signUp": {
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Registra un nuevo visitante en el sistema.",
        "requestBody": {
          "description": "Datos del nuevo visitante a registrar.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVisitorRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVisitorRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/CreateVisitorRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuario visitante creado exitosamente.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/SignupResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignupResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/SignupResponse"
                }
              }
            }
          },
          "400": {
            "description": "Si los datos son inválidos."
          },
          "409": {
            "description": "Si el email ya existe."
          }
        }
      }
    },
    "/users": {
      "put": {
        "tags": [
          "User"
        ],
        "summary": "Permite a un usuario autenticado modificar su propio perfil.",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "Datos del perfil a modificar.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ModifyUserRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ModifyUserRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ModifyUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Retorna el ID del usuario modificado.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/IdResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "404": {
            "description": "Si el usuario no se encuentra."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "post": {
        "tags": [
          "User"
        ],
        "summary": "Permite a un administrador crear cualquier tipo de usuario (Admin, Operator, Visitor) (Admin).",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "requestBody": {
          "description": "Datos del nuevo usuario y sus roles.",
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminCreateUserRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/AdminCreateUserRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/AdminCreateUserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          },
          "201": {
            "description": "Usuario creado exitosamente por el administrador."
          },
          "400": {
            "description": "Si los datos del usuario estan malformados (visitante con fecha de nacimiento nula o tipo de membresia invalida)."
          },
          "409": {
            "description": "Si ya existe usuario con email."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      },
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtiene una lista de todos los usuarios del sistema (Admin).",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve la lista de todos los usuarios.",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetUserResponse"
                  }
                }
              },
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetUserResponse"
                  }
                }
              },
              "text/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/GetUserResponse"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/users/{id}": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtiene un usuario específico por su ID (Admin).",
        "description": "<br/><br/>⚠️ <strong>ROL REQUERIDO:</strong> <span style='color:red; font-weight:bold;'>ADMIN</span>",
        "operationId": "GetUserById",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "El ID (GUID) del usuario a buscar.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve los datos del usuario.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "403": {
            "description": "Si el usuario no tiene el rol de Administrador."
          },
          "404": {
            "description": "Si no se encuentra un usuario con ese ID."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    },
    "/users/me": {
      "get": {
        "tags": [
          "User"
        ],
        "summary": "Obtiene los datos del usuario autenticado.",
        "operationId": "GetCurrentUser",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "description": "<b>Token JWT</b>. Formato: <code>Bearer {su_token}</code>",
            "required": true,
            "schema": {
              "type": "string",
              "default": "Bearer "
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Devuelve los datos del usuario.",
            "content": {
              "text/plain": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              },
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              },
              "text/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetUserResponse"
                }
              }
            }
          },
          "401": {
            "description": "Si el usuario no está autenticado."
          },
          "404": {
            "description": "Si no se encuentra un usuario con el ID del autenticado."
          }
        },
        "security": [
          {
            "Bearer": [ ]
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "AdminCreateUserRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "isVisitor": {
            "type": "boolean",
            "nullable": true
          },
          "isOperator": {
            "type": "boolean",
            "nullable": true
          },
          "isAdmin": {
            "type": "boolean",
            "nullable": true
          },
          "dateOfBirth": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "membrshipType": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "AttractionListResponse": {
        "type": "object",
        "properties": {
          "attractions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AttractionResponse"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "AttractionResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "nullable": true
          },
          "minAge": {
            "type": "integer",
            "format": "int32"
          },
          "capacity": {
            "type": "integer",
            "format": "int32"
          },
          "visitorCount": {
            "type": "integer",
            "format": "int32"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "activeIncidents": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/IncidentResponse"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "BuyTicketRequest": {
        "type": "object",
        "properties": {
          "ticketDate": {
            "type": "string",
            "format": "date-time"
          },
          "specialEventId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreateAttractionRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "nullable": true
          },
          "minAge": {
            "type": "integer",
            "format": "int32"
          },
          "capacity": {
            "type": "integer",
            "format": "int32"
          },
          "description": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreatePreventiveMaintenanceRequest": {
        "type": "object",
        "properties": {
          "date": {
            "type": "string",
            "format": "date-time"
          },
          "duration": {
            "type": "integer",
            "format": "int32"
          },
          "description": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreateRewardRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "price": {
            "type": "integer",
            "format": "int32"
          },
          "stock": {
            "type": "integer",
            "format": "int32"
          },
          "requiredLevel": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "CreateSpecialEventRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "additionalCost": {
            "type": "number",
            "format": "double"
          },
          "capacity": {
            "type": "integer",
            "format": "int32"
          },
          "date": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "CreateVisitorRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "dateOfBirth": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "GetEventResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "additionalCost": {
            "type": "number",
            "format": "double"
          },
          "capacity": {
            "type": "integer",
            "format": "int32"
          },
          "date": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "GetRewardResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "price": {
            "type": "integer",
            "format": "int32"
          },
          "stock": {
            "type": "integer",
            "format": "int32"
          },
          "requiredLevel": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "GetStrategyResponse": {
        "type": "object",
        "properties": {
          "strategy": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "GetTimeResponse": {
        "type": "object",
        "properties": {
          "timeInFormat": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "GetUserResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "nfc": {
            "type": "string",
            "format": "uuid"
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "firstName": {
            "type": "string",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "nullable": true
          },
          "isVisitor": {
            "type": "boolean"
          },
          "isOperator": {
            "type": "boolean"
          },
          "isAdmin": {
            "type": "boolean"
          },
          "visitorProfile": {
            "$ref": "#/components/schemas/VisitorProfileResponse"
          }
        },
        "additionalProperties": false
      },
      "IdRequest": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          }
        },
        "additionalProperties": false
      },
      "IdResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          }
        },
        "additionalProperties": false
      },
      "IncidentResponse": {
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "nullable": true
          },
          "isMaintenance": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ModifyAttractionParamsRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "nullable": true
          },
          "minAge": {
            "type": "integer",
            "format": "int32"
          },
          "capacity": {
            "type": "integer",
            "format": "int32"
          },
          "description": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ModifyUserRequest": {
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "birthDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "NumberUsesResponse": {
        "type": "object",
        "properties": {
          "numberUses": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "PointRecordResponse": {
        "type": "object",
        "properties": {
          "time": {
            "type": "string",
            "format": "date-time"
          },
          "points": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "nullable": true
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "detail": {
            "type": "string",
            "nullable": true
          },
          "instance": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": { }
      },
      "SetActiveStrategyRequest": {
        "type": "object",
        "properties": {
          "strategyType": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SetTimeResponse": {
        "type": "object",
        "properties": {
          "setTime": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "SignupResponse": {
        "type": "object",
        "properties": {
          "isAdmin": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "TokenResponse": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "UserRankingResponse": {
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "nullable": true
          },
          "lastName": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "points": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "VisitorProfileResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "birthDate": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "membership": {
            "type": "string",
            "nullable": true
          },
          "currentAttractionId": {
            "type": "string",
            "format": "uuid",
            "nullable": true
          },
          "totalPoints": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      }
    },
    "securitySchemes": {
      "Bearer": {
        "type": "apiKey",
        "description": "JWT Authorization header using the Bearer scheme. Example: \"Bearer 12345abcdef\"",
        "name": "Authorization",
        "in": "header"
      }
    }
  }
}
